---
permalink: maintain/adding-to-or-changing-subnet-lists-on-grid-network.html 
sidebar: sidebar 
keywords: storagegrid, subnet list, grid network 
summary: 您可以使用變更IP工具來新增或變更網格網路上的子網路。 
---
= 新增或變更Grid Network上的子網路清單
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
您可以使用變更IP工具來新增或變更網格網路上的子網路。

.開始之前
* 您有 `Passwords.txt`檔案。


您可以在Grid Network Subnet List（網格網路子網路清單）中新增、刪除或變更子網路。變更會影響網格中所有節點的路由傳送。


NOTE: 如果您僅變更Grid Network Subnet List（網格網路子網路清單）、請使用Grid Manager新增或變更網路組態。否則、如果由於網路組態問題而無法存取Grid Manager、或者您同時執行Grid Network路由變更和其他網路變更、請使用變更IP工具。

[NOTE]
====
請勿對任何節點的網格網路、管理網路或用戶端網路使用包含下列 IPv4 位址的子網路：

* 192,168,130,101
* 192,168,131,101
* 192,168,130,102
* 192,168,131,102
* 198.51.100.2
* 198.51.100.4


例如，不要對任何節點的網格網路、管理網路或客戶端網路使用下列子網路範圍：

* 192.168.130.0/24，因為此子網路範圍包含 IP 位址 192.168.130.101 和 192.168.130.102
* 192.168.131.0/24，因為此子網路範圍包含 IP 位址 192.168.131.101 和 192.168.131.102
* 198.51.100.0/24，因為此子網路範圍包含 IP 位址 198.51.100.2 和 198.51.100.4


====
.步驟
. 登入主要管理節點：
+
.. 輸入下列命令： `ssh admin@_primary_Admin_Node_IP_`
.. 輸入檔案中列出的密碼 `Passwords.txt`。
.. 輸入以下命令切換到 root ： `su -`
.. 輸入檔案中列出的密碼 `Passwords.txt`。


+
當您以 root 登入時、提示會從變更 `$`為 `#`。

. 輸入下列命令以啟動變更 IP 工具： `change-ip`
. 在提示字元下輸入資源配置通關密碼。
+
主功能表隨即出現。

+
image::../media/change_ip_tool_main_menu.png[顯示變更IP工具歡迎畫面的快照]

. 在主功能表上、選取編輯Grid Network子網路的選項（選項* 4*）。
+

NOTE: 網格網路子網路清單的變更為全網格。

. 請選擇下列其中一項：
+
--
** 輸入以下命令新增子網路： `add CIDR`
** 輸入以下命令刪除子網路： `del CIDR`
** 輸入以下命令來設定子網路清單： `set CIDR`


--
+
--

NOTE: 對於所有命令、您可以使用下列格式輸入多個位址： `add CIDR, CIDR`

範例： `add 172.14.0.0/16, 172.15.0.0/16, 172.16.0.0/16`


TIP: 您可以使用「向上箭頭」將先前輸入的值重新叫用至目前的輸入提示、然後視需要編輯、以減少所需的輸入量。

以下輸入範例顯示網格網路子網路清單的子網路設定：

image::../media/change_ip_tool_gnsl_sample_input.gif[周邊文字所述的螢幕擷取畫面]

--
. 準備好後、輸入* q*返回主功能表畫面。您的變更會保留到清除或套用為止。
. 請選擇下列其中一項：
+
** 選擇選項*5*可在隔離的輸出中顯示編輯內容、僅顯示變更的項目。變更會以綠色（新增）或紅色（刪除）反白顯示、如下面的範例輸出所示：
+
image::../media/change_ip_tool_gnsl_sample_output.gif[周邊文字所述的螢幕擷取畫面]

** 選擇選項*6*可在顯示完整組態的輸出中顯示編輯內容。變更會以綠色（新增）或紅色（刪除）強調顯示。
+

NOTE: 某些命令列介面可能會使用刪除線格式顯示新增和刪除內容。



. 選取選項* 7*以驗證所有階段變更。
+
此驗證可確保遵循Grid、Admin和Client Networks的規則、例如使用重疊的子網路。

. （可選）選擇選項*8*以保存所有分段更改並稍後返回以繼續進行更改。
+
此選項可讓您結束變更IP工具、並在稍後重新啟動、而不會遺失任何未套用的變更。

. 執行下列其中一項：
+
** 如果您要清除所有變更而不儲存或套用新的網路組態、請選取選項* 9*。
** 如果您準備好套用變更並配置新的網路組態、請選取選項* 10*。在資源配置期間、輸出會在套用更新時顯示狀態、如下列輸出範例所示：
+
[listing]
----
Generating new grid networking description file...

Running provisioning...

Updating grid network configuration on Name
----


. 如果您在變更Grid Network時選擇選項* 10*、請選取下列其中一個選項：
+
** *套用*：立即套用變更、必要時自動重新啟動每個節點。
+
如果新的網路組態可與舊的網路組態同時運作、而無需任何外部變更、您可以使用* appli*選項來進行全自動組態變更。

** *階段*：下次重新啟動節點時套用變更。
+
如果您需要變更實體或虛擬網路組態以使新的網路組態正常運作、您必須使用*登臺*選項、關閉受影響的節點、進行必要的實體網路變更、然後重新啟動受影響的節點。

+

NOTE: 如果您使用 * 階段 * 選項、請在登臺後盡快重新啟動節點、以將中斷情形減至最低。

** * 取消 * ：目前請勿進行任何網路變更。
+
如果您不知道所提議的變更需要重新啟動節點、您可以延後變更、將使用者影響降至最低。選取*取消*會返回主功能表、並保留您的變更、以便稍後套用。



+
套用或重新設定變更後、會因網格組態變更而產生新的恢復套件。

. 如果組態因為錯誤而停止、則可使用下列選項：
+
** 若要終止 IP 變更程序並返回主功能表、請輸入 *A* 。
** 若要重試失敗的作業、請輸入* r*。
** 若要繼續下一個作業、請輸入* c*。
+
稍後可從主功能表選取選項* 10*（套用變更）、重試失敗的作業。在所有作業順利完成之前、IP變更程序將不會完成。

** 如果您必須手動介入（例如重新開機節點）、並且確信工具認為失敗的動作確實成功完成、請輸入* f*將其標示為成功、然後移至下一個作業。


. 從Grid Manager下載新的恢復套件。
+
.. 選擇* maintenance *>* System*>* Recovery套件*。
.. 輸入資源配置通關密碼。


+

CAUTION: 必須保護恢復套件檔案、因為其中包含可用於從StorageGRID 該系統取得資料的加密金鑰和密碼。


