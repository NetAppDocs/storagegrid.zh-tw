---
permalink: troubleshoot/index.html 
sidebar: sidebar 
keywords: how to troubleshoot a StorageGRID system 
summary: 如果您在使用StorageGRID 無法修復的系統時遇到問題、請參閱本節中的秘訣與準則、以協助您判斷及解決問題。 
---
= 疑難排解StorageGRID 作業系統
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
如果您在使用StorageGRID 無法修復的系統時遇到問題、請參閱本節中的秘訣與準則、以協助您判斷及解決問題。

您通常可以自行解決問題、但您可能需要將某些問題提報給技術支援部門。



== [[define_profile]] 定義問題

解決問題的第一步是清楚定義問題。

下表提供定義問題時可能收集的資訊類型範例：

[cols="1a,1a"]
|===
| 問題 | 回應範例 


 a| 
什麼是不執行的功能？StorageGRID其症狀為何？
 a| 
用戶端應用程式回報物件無法擷取至 StorageGRID 。



 a| 
問題從何時開始？
 a| 
在 2020 年 1 月 8 日約 14 ： 50 時、首次拒絕物件擷取。



 a| 
您第一次注意到問題的方式為何？
 a| 
用戶端應用程式通知。也收到警示電子郵件通知。



 a| 
問題是否一致發生、或只是偶爾發生？
 a| 
問題持續發生。



 a| 
如果問題經常發生、會發生哪些步驟
 a| 
每次用戶端嘗試擷取物件時都會發生問題。



 a| 
如果問題間歇性發生、何時會發生？記錄您所察覺的每個事件的時間。
 a| 
問題不是間歇性的。



 a| 
您以前是否曾遇到過這個問題？您過去有多常發生此問題？
 a| 
這是我第一次看到這個問題。

|===


== 評估系統的風險與影響

在您定義問題之後、請評估問題對StorageGRID VMware系統的風險和影響。例如、關鍵警示的存在並不代表系統不提供核心服務。

下表摘要說明範例問題對系統作業的影響：

[cols="1a,1a"]
|===
| 問題 | 回應範例 


 a| 
這個系統能否擷取內容？StorageGRID
 a| 
不可以



 a| 
用戶端應用程式可以擷取內容嗎？
 a| 
有些物件可以擷取、有些則無法擷取。



 a| 
資料是否有風險？
 a| 
不可以



 a| 
經營業務的能力是否受到嚴重影響？
 a| 
是的、因為用戶端應用程式無法將物件儲存至 StorageGRID 系統、因此無法一致地擷取資料。

|===


== 收集資料

在您定義問題並評估其風險與影響之後、請收集資料以供分析。最適合收集的資料類型取決於問題的本質。

[cols="1a,2a,1a"]
|===
| 要收集的資料類型 | 為何要收集此資料 | 說明 


 a| 
建立最近變更的時間表
 a| 
變更您的系統、其組態或環境可能會導致新的行為。StorageGRID
 a| 
* <<create_timeline,建立最近變更的時間表>>




 a| 
檢閱警示
 a| 
警示可針對可能造成問題的潛在問題提供重要線索、協助您快速判斷問題的根本原因。

檢閱目前警示清單、查看 StorageGRID 是否已識別出問題的根本原因。

檢閱過去觸發的警示、以取得更多洞見。
 a| 
* link:../monitor/monitoring-system-health.html#view-current-and-resolved-alerts["檢視目前和已解決的警示"]




 a| 
建立基準
 a| 
收集各種作業值的正常層級資訊。這些基準值和偏離這些基準值、可提供寶貴的線索。
 a| 
* <<establish-baselines,建立基準>>




 a| 
執行擷取和擷取測試
 a| 
若要疑難排解擷取和擷取的效能問題、請使用工作站來儲存和擷取物件。比較使用用戶端應用程式時的結果。
 a| 
* link:../monitor/monitoring-put-and-get-performance.html["監控成效、獲得效能"]




 a| 
檢閱稽核訊息
 a| 
檢閱稽核訊息StorageGRID 以詳細追蹤各項功能。稽核訊息中的詳細資料可用於疑難排解許多類型的問題、包括效能問題。
 a| 
* link:../monitor/reviewing-audit-messages.html["檢閱稽核訊息"]




 a| 
檢查物件位置和儲存設備完整性
 a| 
如果您遇到儲存問題、請確認物件放置在您預期的位置。檢查儲存節點上物件資料的完整性。
 a| 
* link:../monitor/monitoring-object-verification-operations.html["監控物件驗證作業"]
* link:../troubleshoot/confirming-object-data-locations.html["確認物件資料位置"]
* link:../troubleshoot/verifying-object-integrity.html["驗證物件完整性"]




 a| 
收集技術支援資料
 a| 
技術支援可能會要求您收集資料或檢閱特定資訊、以協助疑難排解問題。
 a| 
* link:../monitor/collecting-log-files-and-system-data.html["收集記錄檔和系統資料"]
* link:../monitor/manually-triggering-autosupport-message.html["手動觸發 AutoSupport 套件"]
* link:../monitor/reviewing-support-metrics.html["檢視支援指標"]


|===


=== [[create_timals]]建立最近變更的時間表

發生問題時、您應該考慮最近發生的變更、以及變更發生的時間。

* 變更您的系統、其組態或環境可能會導致新的行為。StorageGRID
* 變更時間表可協助您找出可能導致問題的變更、以及每項變更可能如何影響問題的開發。


建立系統最近變更的表格、其中包含每項變更發生時間的相關資訊、以及變更的相關詳細資料、例如變更進行期間發生的其他事項：

[cols="1a,1a,2a"]
|===
| 改變時間 | 變更類型 | 詳細資料 


 a| 
例如：

* 您何時開始恢復節點？
* 軟體升級何時完成？
* 您是否中斷此程序？

 a| 
發生什麼事了？您是做什麼工作？
 a| 
記錄變更的相關詳細資料。例如：

* 網路變更的詳細資料。
* 安裝了哪個修補程式。
* 用戶端工作負載的變更方式。


請務必注意、是否同時發生多項變更。例如、升級進行期間是否進行此變更？

|===


==== 最近重大變更的範例

以下是一些可能發生重大變更的範例：

* 最近是否安裝、擴充或恢復了這個功能？StorageGRID
* 系統最近是否已升級？是否套用了修補程式？
* 最近是否有任何硬體已修復或變更？
* ILM原則是否已更新？
* 用戶端工作負載是否已變更？
* 用戶端應用程式或其行為是否有所變更？
* 您是否已變更負載平衡器、或新增或移除管理節點或閘道節點的高可用度群組？
* 是否有任何可能需要很長時間才能完成的工作？範例包括：
+
** 恢復故障的儲存節點
** 儲存節點汰換


* 是否已對使用者驗證進行任何變更、例如新增租戶或變更LDAP組態？
* 資料移轉是否正在進行？
* 平台服務最近是否啟用或變更？
* 最近是否啟用法規遵循？
* 是否已新增或移除雲端儲存池？
* 儲存壓縮或加密是否有任何變更？
* 網路基礎架構是否有任何變更？例如、VLAN、路由器或DNS。
* NTP來源是否有任何變更？
* Grid、管理或用戶端網路介面是否有任何變更？
* 是否對StorageGRID 此系統或其環境進行任何其他變更？




=== 建立基準

您可以記錄各種作業值的正常層級、為系統建立基準。未來您可以比較目前值與這些基準、以協助偵測並解決異常值。

[cols="1a,1a,2a"]
|===
| 屬性 | 價值 | 如何取得 


 a| 
平均儲存使用量
 a| 
每天消耗GB

每日使用百分比
 a| 
前往Grid Manager。在「節點」頁面上、選取整個網格或站台、然後前往「儲存」索引標籤。

在「使用的儲存設備-物件資料」圖表中、找出該行相當穩定的期間。將游標放在圖表上、以預估每天使用多少儲存設備

您可以針對整個系統或特定資料中心收集此資訊。



 a| 
平均中繼資料使用量
 a| 
每天消耗GB

每日使用百分比
 a| 
前往Grid Manager。在「節點」頁面上、選取整個網格或站台、然後前往「儲存」索引標籤。

在「使用的儲存設備-物件中繼資料」圖表中、找出該行相當穩定的期間。將游標放在圖表上、以估計每天使用多少中繼資料儲存設備

您可以針對整個系統或特定資料中心收集此資訊。



 a| 
S3 操作速率
 a| 
作業/秒
 a| 
在網格管理器儀表板上，選擇*效能*>*儲存節點的 S3 操作*。

若要查看特定網站或節點的擷取和檢索速率和計數，請選擇 *Nodes* > *_site 或 Storage Node_* > *Objects*。將遊標放在 S3 攝取和檢索圖表上。



 a| 
ILM評估率
 a| 
物件數/秒
 a| 
從「節點」頁面選取「*網格_*>* ILM *」。

在ILM佇列圖表中、找出線路相當穩定的期間。將游標放在圖表上、以預估系統 * 評估率 * 的基準值。



 a| 
ILM掃描率
 a| 
物件數/秒
 a| 
選擇 *Nodes* > *_grid_* > *ILM*。

在ILM佇列圖表中、找出線路相當穩定的期間。將游標放在圖表上、以預估系統 * 掃描速率 * 的基準值。



 a| 
從用戶端作業排入佇列的物件
 a| 
物件數/秒
 a| 
選擇 *Nodes* > *_grid_* > *ILM*。

在ILM佇列圖表中、找出線路相當穩定的期間。將游標放在圖表上、以預估系統的 * 物件佇列（從用戶端作業） * 的基準值。



 a| 
平均查詢延遲
 a| 
毫秒
 a| 
選擇*節點* > *儲存節點* > *物件*。在查詢表中，查看平均延遲的值。

|===


== 分析資料

請使用您收集的資訊來判斷問題的原因和可能的解決方案。

分析是問題相依的、但一般而言：

* 使用警示找出故障點和瓶頸。
* 使用警示記錄和圖表來重建問題歷程記錄。
* 使用圖表找出異常狀況、並將問題情況與正常作業進行比較。




== 提報資訊檢查清單

如果您無法自行解決問題、請聯絡技術支援部門。聯絡技術支援人員之前、請先收集下表所列的資訊、以利解決問題。

[cols="1a,2a,4a"]
|===
| image:../media/feature_checkmark.gif["核取符號"] | 項目 | 附註 


 a| 
 a| 
問題陳述
 a| 
問題症狀為何？問題從何時開始？是否持續或間歇性發生？如果是間歇性的、發生的時間為何？

<<define_problem,定義問題>>



 a| 
 a| 
影響評估
 a| 
問題的嚴重性為何？對用戶端應用程式有何影響？

* 用戶端之前是否已成功連線？
* 用戶端是否可以擷取、擷取及刪除資料？




 a| 
 a| 
系統ID StorageGRID
 a| 
選擇*維護* > *系統* > *許可證*。  StorageGRID系統 ID 顯示為目前授權的一部分。



 a| 
 a| 
軟體版本
 a| 
從Grid Manager頂端、選取說明圖示、然後選取*關於*以查看StorageGRID 此版本。



 a| 
 a| 
自訂
 a| 
概述StorageGRID 如何設定您的系統。例如、請列出下列項目：

* 網格是否使用儲存壓縮、儲存加密或法規遵循？
* ILM 是否會建立複寫或刪除編碼的物件？ILM是否確保站台備援？ILM 規則是否使用平衡、嚴格或雙重承諾擷取行為？




 a| 
 a| 
記錄檔和系統資料
 a| 
收集系統的日誌檔案和系統資料。選擇*支援* > *工具* > *日誌收集*。

您可以收集整個網格或所選節點的記錄。

如果您僅收集選定節點的日誌，請確保至少包含一個具有 ADC 服務的儲存節點。站點安裝的前三個儲存節點包括 ADC 服務。



 a| 
 a| 
基礎資訊
 a| 
收集有關擷取作業、擷取作業和儲存使用量的基礎資訊。

<<establish-baselines,建立基準>>



 a| 
 a| 
最近變更的時間表
 a| 
建立時間軸、摘要說明系統或其環境最近的任何變更。

<<create_timeline,建立最近變更的時間表>>



 a| 
 a| 
診斷問題的歷史記錄
 a| 
如果您已自行診斷或疑難排解問題、請務必記錄您所採取的步驟和結果。

|===