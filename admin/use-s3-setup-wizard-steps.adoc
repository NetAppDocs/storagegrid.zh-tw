---
permalink: admin/use-s3-setup-wizard-steps.html 
sidebar: sidebar 
keywords: FabricPool and S3 setup wizard, object storage system, S3 application 
summary: 您可以使用 S3 設定精靈、將 StorageGRID 設定為 S3 應用程式的物件儲存系統。 
---
= 存取並完成 S3 設定精靈
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
您可以使用 S3 設定精靈來設定 StorageGRID 、以便搭配 S3 應用程式使用。安裝精靈提供應用程式存取 StorageGRID 儲存區和儲存物件所需的值。

.開始之前
* 您有link:admin-group-permissions.html["root 存取權限"]。
* 您已檢閱link:use-s3-setup-wizard.html["考量與要求"]以使用精靈。




== 存取精靈

.步驟
. 使用登入 Grid Manager link:web-browser-requirements.html["支援的網頁瀏覽器"]。
. 如果儀表板上出現 * FabricPool 和 S3 設定精靈 * 橫幅、請選取橫幅中的連結。如果橫幅不再出現、請從 Grid Manager 的標題列中選取說明圖示、然後選取 * FabricPool 和 S3 設定精靈 * 。
+
image::../media/help_menu.png[說明功能表]

. 在 FabricPool and S3 安裝精靈頁面的 S3 應用程式區段中、選取 * 立即設定 * 。




== 步驟 6 之 1 ：設定 HA 群組

HA 群組是每個節點包含 StorageGRID 負載平衡器服務的集合。HA 群組可以包含閘道節點、管理節點或兩者。

您可以使用 HA 群組來協助保持 S3 資料連線可用。如果 HA 群組中的作用中介面發生故障、備份介面就能管理工作負載、對 S3 作業幾乎沒有影響。

如需此工作的詳細資訊，請參閱link:managing-high-availability-groups.html["管理高可用度群組"]。

.步驟
. 如果您打算使用外部負載平衡器、則不需要建立 HA 群組。選擇 * 跳過此步驟 * 並轉至<<步驟 2 、共 6 步：設定負載平衡器端點>>。
. 若要使用 StorageGRID 負載平衡器、您可以建立新的 HA 群組或使用現有的 HA 群組。
+
[role="tabbed-block"]
====
.建立HA群組
--
.. 若要建立新的 HA 群組、請選取 * 建立 HA 群組 * 。
.. 如需 * 輸入詳細資料 * 步驟、請填寫下列欄位。
+
[cols="1a,2a"]
|===
| 欄位 | 說明 


 a| 
HA 群組名稱
 a| 
此 HA 群組的唯一顯示名稱。



 a| 
說明（選用）
 a| 
此 HA 群組的描述。

|===
.. 在 * 新增介面 * 步驟中、選取您要在此 HA 群組中使用的節點介面。
+
使用欄標題來排序列、或輸入搜尋詞彙以更快找到介面。

+
您可以選取一或多個節點、但每個節點只能選取一個介面。

.. 對於「介面優先順序」步驟、請判斷此 HA 群組的主要介面和任何備份介面。
+
拖曳列以變更 * 優先順序 * 欄中的值。

+
清單中的第一個介面是主要介面。主介面是作用中介面、除非發生故障。

+
如果 HA 群組包含多個介面、且作用中介面故障、則虛擬 IP （ VIP ）位址會依照優先順序移至第一個備份介面。如果該介面故障、VIP位址會移至下一個備份介面、依此類推。解決故障時、 VIP 位址會移回可用的最高優先順序介面。

.. 在 * 輸入 IP 位址 * 步驟中、請填寫下列欄位。
+
[cols="1a,2a"]
|===
| 欄位 | 說明 


 a| 
子網路 CIDR
 a| 
以 CIDR 表示法和 #8212 表示的 VIP 子網路位址； IPv4 位址後面接著斜線和子網路長度（ 0-32 ）。

網路位址不得設定任何主機位元。例如 `192.16.0.0/22`：。



 a| 
閘道 IP 位址（選用）
 a| 
如果用於存取 StorageGRID 的 S3 IP 位址與 StorageGRID VIP 位址不在同一子網路上、請輸入 StorageGRID VIP 本機閘道 IP 位址。本機閘道IP位址必須位於VIP子網路內。



 a| 
虛擬 IP 位址
 a| 
為 HA 群組中的作用中介面輸入至少一個且不超過十個 VIP 位址。所有 VIP 位址都必須位於 VIP 子網路內。

至少一個位址必須是 IPv4 。您也可以指定其他的IPv6位址。

|===
.. 選取 * 建立 HA 群組 * 、然後選取 * 完成 * 以返回 S3 設定精靈。
.. 選取 * 繼續 * 以移至負載平衡器步驟。


--
.使用現有 HA 群組
--
.. 若要使用現有的 HA 群組、請從 * 選取 HA 群組 * 中選取 HA 群組名稱。
.. 選取 * 繼續 * 以移至負載平衡器步驟。


--
====




== 步驟 2 、共 6 步：設定負載平衡器端點

StorageGRID 使用負載平衡器從用戶端應用程式管理工作負載。負載平衡可將多個儲存節點的速度和連線容量最大化。

您可以使用 StorageGRID 負載平衡器服務（存在於所有閘道和管理節點上）、也可以連線至外部（第三方）負載平衡器。建議使用 StorageGRID 負載平衡器。

如需此工作的詳細資訊，請參閱link:managing-load-balancing.html["負載平衡考量"]。

若要使用 StorageGRID 負載平衡器服務、請選取 * StorageGRID 負載平衡器 * 索引標籤、然後建立或選取您要使用的負載平衡器端點。若要使用外部負載平衡器、請選取 * 外部負載平衡器 * 索引標籤、並提供您已設定之系統的詳細資料。

[role="tabbed-block"]
====
.建立端點
--
.步驟
. 若要建立負載平衡器端點、請選取 * 建立端點 * 。
. 如需 * 輸入端點詳細資料 * 步驟、請填寫下列欄位。
+
[cols="1a,2a"]
|===
| 欄位 | 說明 


 a| 
名稱
 a| 
端點的描述性名稱。



 a| 
連接埠
 a| 
您要用於負載平衡的選用功能。StorageGRID此欄位預設為您建立的第一個端點為 10433 、但您可以輸入任何未使用的外部連接埠。如果您輸入 80 或 443 、則端點只能在 Gateway 節點上設定、因為這些連接埠是保留在管理節點上。

* 注意： * 不允許其他網格服務使用的連接埠。請參閱link:../network/network-port-reference.html["網路連接埠參考"]。



 a| 
用戶端類型
 a| 
必須是 *S3 * 。



 a| 
網路傳輸協定
 a| 
選擇* HTTPS *。

* 注意 * ：支援與 StorageGRID 通訊、但不建議使用 TLS 加密。

|===
. 對於 *Select 綁定模式 * 步驟，請指定綁定模式。繫結模式可控制使用任何 IP 位址或使用特定 IP 位址和網路介面存取端點的方式。
+
[cols="1a,3a"]
|===
| 模式 | 說明 


 a| 
全域（預設）
 a| 
用戶端可以使用任何閘道節點或管理節點的 IP 位址、任何網路上任何 HA 群組的虛擬 IP （ VIP ）位址、或對應的 FQDN 來存取端點。

除非您需要限制此端點的存取能力、否則請使用* Global *設定（預設）。



 a| 
HA群組的虛擬IP
 a| 
用戶端必須使用 HA 群組的虛擬 IP 位址（或對應的 FQDN ）才能存取此端點。

具有此繫結模式的端點都可以使用相同的連接埠編號、只要您為端點選取的 HA 群組不會重疊。



 a| 
節點介面
 a| 
用戶端必須使用所選節點介面的 IP 位址（或對應的 FQDN ）來存取此端點。



 a| 
節點類型
 a| 
根據您選取的節點類型、用戶端必須使用任何管理節點的 IP 位址（或對應的 FQDN ）或任何閘道節點的 IP 位址（或對應的 FQDN ）來存取此端點。

|===
. 對於租戶存取步驟、請選取下列其中一項：
+
[cols="1a,2a"]
|===
| 欄位 | 說明 


 a| 
允許所有租戶（預設）
 a| 
所有租戶帳戶都可以使用此端點來存取他們的貯體。



 a| 
允許選取的租戶
 a| 
只有選取的租戶帳戶才能使用此端點存取其貯體。



 a| 
封鎖選取的租戶
 a| 
選取的租戶帳戶無法使用此端點存取其儲存區。所有其他租戶都可以使用此端點。

|===
. 對於 * 附加憑證 * 步驟、請選取下列其中一項：
+
[cols="1a,2a"]
|===
| 欄位 | 說明 


 a| 
上傳憑證（建議）
 a| 
使用此選項可上傳 CA 簽署的伺服器憑證、憑證私密金鑰及選用的 CA 套件組合。



 a| 
產生憑證
 a| 
使用此選項可產生自我簽署的憑證。如需詳細的輸入內容、請參閱link:configuring-load-balancer-endpoints.html["設定負載平衡器端點"]。



 a| 
使用 StorageGRID S3 憑證
 a| 
只有在您已上傳或產生 StorageGRID 通用憑證的自訂版本時、才可使用此選項。如需詳細資訊、請參閱 link:configuring-custom-server-certificate-for-storage-node.html["設定 S3 API 憑證"] 。

|===
. 選擇 * 完成 * 返回 S3 設定精靈。
. 選擇 * 繼續 * 以前往租戶和貯體步驟。



NOTE: 對端點憑證所做的變更、可能需要15分鐘才能套用至所有節點。

--
.使用現有負載平衡器端點
--
.步驟
. 若要使用現有的端點、請從 * 選取負載平衡器端點 * 中選取其名稱。
. 選擇 * 繼續 * 以前往租戶和貯體步驟。


--
.使用外部負載平衡器
--
.步驟
. 若要使用外部負載平衡器、請填寫下列欄位。
+
[cols="1a,2a"]
|===
| 欄位 | 說明 


 a| 
FQDN
 a| 
外部負載平衡器的完整網域名稱（ FQDN ）。



 a| 
連接埠
 a| 
S3 應用程式用來連線到外部負載平衡器的連接埠編號。



 a| 
憑證
 a| 
複製外部負載平衡器的伺服器憑證、然後貼到此欄位。

|===
. 選擇 * 繼續 * 以前往租戶和貯體步驟。


--
====


== 步驟 3 、共 6 步：建立租戶和貯體

租戶是可以使用 S3 應用程式在 StorageGRID 中儲存及擷取物件的實體。每個租戶都有自己的使用者、存取金鑰、貯體、物件和一組特定功能。

貯體是用來儲存租戶物件和物件中繼資料的容器。雖然租戶可能有許多貯體、但精靈可協助您以最快且最簡單的方式建立租戶和貯體。如果您稍後需要新增儲存區或設定選項、可以使用租戶管理程式。

有關此任務的詳細信息，請參閱link:creating-tenant-account.html["建立租戶帳戶"]和link:../tenant/creating-s3-bucket.html["建立S3儲存區"]。

.步驟
. 輸入租戶帳戶的名稱。
+
租戶名稱不一定是唯一的。建立租戶帳戶時、會收到唯一的數字帳戶ID。

. 根據您的 StorageGRID 系統是使用link:using-identity-federation.html["身分識別聯盟"]、link:configuring-sso.html["單一登入（ SSO ）"]還是兩者、定義租戶帳戶的根存取權。
+
[cols="1a,2a"]
|===
| 選項 | 請這麼做 


 a| 
如果未啟用身分識別聯盟
 a| 
指定當以本機根使用者身分登入租戶時所使用的密碼。



 a| 
如果已啟用身分識別聯盟
 a| 
.. 選取要提供給租用戶的現有同盟群組link:../tenant/tenant-management-permissions.html["root 存取權限"]。
.. 您也可以選擇指定當以本機根使用者身分登入租用戶時要使用的密碼。




 a| 
如果同時啟用身分識別聯盟和單一登入（ SSO ）
 a| 
選取要提供給租用戶的現有同盟群組link:../tenant/tenant-management-permissions.html["root 存取權限"]。沒有本機使用者可以登入。

|===
. 如果您希望精靈為 root 使用者建立存取金鑰 ID 和秘密存取金鑰、請選取 * 自動建立 root 使用者 S3 存取金鑰 * 。
+
如果租戶的唯一使用者是 root 使用者、請選取此選項。如果其他使用者將使用此租用戶、則link:../tenant/index.html["使用 Tenant Manager"]可設定金鑰和權限。

. 如果您現在想為此租戶建立貯體、請選取 * 為此租戶建立貯體 * 。
+

TIP: 如果已啟用網格的 S3 物件鎖定功能、則在此步驟建立的儲存格並未啟用 S3 物件鎖定功能。如果您需要為此 S3 應用程式使用 S3 物件鎖定貯體、請勿現在選擇建立貯體。請改用 Tenant Manager link:../tenant/creating-s3-bucket.html["建立貯體"]稍後再執行。

+
.. 輸入 S3 應用程式將使用的儲存區名稱。例如 `s3-bucket`：。
+
您無法在建立貯體之後變更貯體名稱。

.. 為此貯體選取 * 區域 * 。
+
使用預設區域(`us-east-1`）、除非您預期未來會使用 ILM 來根據貯體的區域篩選物件。



. 選取 * 建立並繼續 * 。




== [[download-data]] 步驟 4 、共 6 步：下載資料

在下載資料步驟中、您可以下載一或兩個檔案、以儲存您剛設定的詳細資料。

.步驟
. 如果您選取 * 自動建立 root 使用者 S3 存取金鑰 * 、請執行下列其中一項或兩項操作：
+
** 選取 * 下載存取金鑰 * 以下載 `.csv`包含租戶帳戶名稱、存取金鑰 ID 和秘密存取金鑰的檔案。
** 選擇複製圖標（image:../media/icon_tenant_copy_url.png["複製圖示"]）將訪問密鑰 ID 和加密訪問密鑰複製到剪貼板。


. 選取 * 下載組態值 * 以下載 `.txt`包含負載平衡器端點、租戶、貯體和根使用者設定的檔案。
. 將此資訊儲存至安全的位置。
+

CAUTION: 在複製兩個存取金鑰之前、請勿關閉此頁面。關閉此頁面後、金鑰將無法使用。請務必將此資訊儲存在安全的位置、因為此資訊可用於從 StorageGRID 系統取得資料。

. 如果出現提示、請選取核取方塊、確認您已下載或複製金鑰。
. 選取 * 繼續 * 以移至 ILM 規則和原則步驟。




== 第 5 步、共 6 步：審查 S3 的 ILM 規則和 ILM 原則

資訊生命週期管理（ ILM ）規則可控制 StorageGRID 系統中所有物件的放置、持續時間和擷取行為。StorageGRID 隨附的 ILM 原則會為所有物件建立兩個複寫複本。此原則會生效、直到您至少啟動一個新原則為止。

.步驟
. 檢閱頁面上提供的資訊。
. 如果您要新增屬於新租戶或貯體之物件的特定指示、請建立新規則和新原則。請參閱link:../ilm/access-create-ilm-rule-wizard.html["建立ILM規則"]和link:../ilm/ilm-policy-overview.html["使用 ILM 原則"]。
. 請選擇 * 我已檢閱這些步驟、並瞭解我需要做什麼 * 。
. 選取核取方塊、表示您瞭解接下來該怎麼做。
. 選擇 * 繼續 * 前往 * 摘要 * 。




== 步驟 6 之 6 ：檢視摘要

.步驟
. 檢閱摘要。
. 請記下後續步驟中的詳細資料、其中說明在連線到 S3 用戶端之前可能需要的其他組態。例如、選取 * 以 root 身分登入 * 會將您帶到租戶管理員、您可以在其中新增租戶使用者、建立其他貯體、以及更新貯體設定。
. 選擇*完成*。
. 使用您從 StorageGRID 下載的檔案或手動取得的值來設定應用程式。

