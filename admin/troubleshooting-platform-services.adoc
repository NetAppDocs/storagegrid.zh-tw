---
permalink: admin/troubleshooting-platform-services.html 
sidebar: sidebar 
keywords: troubleshoot platform services, platform services endpoint error 
summary: 平台服務中使用的端點是由租戶使用者在租戶管理程式中建立和維護、但是、如果租戶在設定或使用平台服務時遇到問題、您可能可以使用Grid Manager來協助解決問題。 
---
= 疑難排解平台服務
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
平台服務中使用的端點是由租戶使用者在租戶管理程式中建立和維護、但是、如果租戶在設定或使用平台服務時遇到問題、您可能可以使用Grid Manager來協助解決問題。



== 新端點的問題

租戶必須先使用租戶管理程式建立一或多個端點、才能使用平台服務。每個端點代表一個平台服務的外部目的地、例如 StorageGRID S3 儲存庫、 Amazon Web Services 儲存庫、 Amazon Simple Notification Service 主題、 Kafka 主題、或本地或 AWS 上託管的 ElasticSearch 叢集。每個端點都包括外部資源的位置、以及存取該資源所需的認證資料。

當租戶建立端點時StorageGRID 、此驗證系統會驗證端點是否存在、以及是否可以使用指定的認證來達到端點。端點的連線會從每個站台的一個節點驗證。

如果端點驗證失敗、會出現錯誤訊息、說明端點驗證失敗的原因。租戶使用者應解決此問題、然後再次嘗試建立端點。


NOTE: 如果未啟用租戶帳戶的平台服務、端點建立將會失敗。



== 現有端點的問題

如果 StorageGRID 嘗試連線至現有端點時發生錯誤、租戶管理程式的儀表板上會顯示訊息。

image::../media/tenant_dashboard_endpoint_error.png[儀表板上的端點錯誤訊息]

租戶使用者可前往「端點」頁面、檢閱每個端點的最新錯誤訊息、並判斷錯誤發生時間多久前。「*最後一個錯誤*」欄會顯示每個端點的最新錯誤訊息、並指出錯誤發生時間已多久。包含圖示的錯誤image:../media/icon_alert_red_critical.png["紅色X圖示"]發生在過去 7 天內。

image::../media/endpoints_last_error.png[顯示「上次錯誤」欄的「端點」頁面的快照]


NOTE: *最後一個錯誤*欄中的某些錯誤訊息可能會在括弧中包含一個記錄ID。網格管理員或技術支援人員可以使用此ID、在bytcast記錄中找到更多有關錯誤的詳細資訊。



== 與Proxy伺服器相關的問題

如果您已配置link:configuring-storage-proxy-settings.html["儲存代理伺服器"]在儲存節點和平台服務端點之間，如果您的代理服務不允許來自StorageGRID的訊息，則可能會發生錯誤。若要解決這些問題，請檢查代理伺服器的設置，以確保與平台服務相關的訊息不會被封鎖。



== 確定是否發生錯誤

如果過去 7 天內發生任何端點錯誤、租戶管理程式中的儀表板會顯示警示訊息。您可以前往「端點」頁面、查看更多錯誤的詳細資料。



== 用戶端作業失敗

某些平台服務問題可能會導致S3儲存區上的用戶端作業失敗。例如、如果內部複寫狀態機器（RSM）服務停止、或是有太多平台服務訊息排入佇列等待傳送、S3用戶端作業就會失敗。

若要檢查服務狀態：

. 選擇 *節點* > *網站* > *儲存節點* > 概覽*。
. 檢查警報表中的活動警報。
. 解決所有活動警報。如有需要，請聯絡技術支援。




== 可恢復和不可恢復的端點錯誤

建立端點之後、平台服務要求可能會因為各種原因而發生錯誤。使用者介入可恢復部分錯誤。例如、可能會發生可恢復的錯誤、原因如下：

* 使用者的認證資料已刪除或過期。
* 目標儲存桶不存在。
* 無法傳送通知。


如果遇到可恢復的錯誤、平台服務要求將會重試、直到成功為止。StorageGRID

其他錯誤是無法恢復的。例如，以下原因可能會發生不可恢復的錯誤：

* 端點已刪除。
* Webhook 端點目標透過以下方式回應通知請求 `400 Bad Request`錯誤。


如果 StorageGRID 遇到無法恢復的端點錯誤：

* 在 Grid Manager 中、前往 * 支援 * > * 工具 * > * 指標 * > * Grafana* > * 平台服務總覽 * 、檢視錯誤詳細資料。
* 在 Tenant Manager 中、前往 * 儲存設備（ S3 ） * > * 平台服務端點 * 檢視錯誤詳細資料。
* 檢查 `/var/local/log/bycast-err.log`相關錯誤。具有 ADC 服務的儲存節點包含此記錄檔。




== 無法傳送平台服務訊息

如果目標遇到問題而無法接受平台服務訊息，則儲存桶上的用戶端操作會成功，但平台服務訊息不會被傳遞。例如，如果在目標上更新憑證，使得StorageGRID無法再對目標服務進行身份驗證，則可能會發生此錯誤。

檢查相關警示。



== 平台服務要求的效能變慢

如果傳送要求的速度超過目的地端點接收要求的速度、則支援使用此軟體來限制傳入S3的貯體要求。StorageGRID節流只會在有待傳送至目的地端點的要求待處理項目時發生。

唯一的可見效果是傳入S3要求執行時間較長。如果您開始偵測到效能大幅降低、應該降低擷取速度、或是使用容量較大的端點。如果要求的待處理項目持續增加、用戶端S3作業（例如PUT要求）最終將會失敗。

CloudMirror要求較容易受到目的地端點效能的影響、因為這些要求通常比搜尋整合或事件通知要求涉及更多資料傳輸。



== 平台服務要求失敗

若要檢視平台服務的要求失敗率：

. 選擇*節點*。
. 選擇「*站台_*>*平台服務*」。
. 檢視「要求錯誤率」圖表。
+
image::../media/nodes_page_site_level_platform_services.gif[節點頁面站台層級平台服務]





== 平台服務無法使用警示

*平台服務無法使用*警示表示站台無法執行平台服務作業、因為有太少的儲存節點正在執行或可用、因此無法在站台上執行平台服務作業。

此RSM服務可確保平台服務要求會傳送至各自的端點。

若要解決此警示、請判斷站台上的哪些儲存節點包含了RSM服務。（儲存節點上也包含 ADC 服務的 RSM 服務。）然後、請確保大多數儲存節點都在執行中且可供使用。


NOTE: 如果站台上有多個包含RSM服務的儲存節點故障、您就會遺失該站台的任何擱置中平台服務要求。



== 平台服務端點的其他疑難排解指南

如需其他資訊link:../tenant/troubleshooting-platform-services-endpoint-errors.html["使用租戶帳戶 > 疑難排解平台服務端點"]、請參閱。

.相關資訊
link:../troubleshoot/index.html["疑難排解 StorageGRID 系統"]
