---
permalink: tenant/what-is-branch-bucket.html 
sidebar: sidebar 
keywords: how to create branch bucket 
summary: 分支儲存桶提供對儲存桶中在特定時間存在的物件的存取。 
---
= 什麼是分支桶？
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
分支儲存桶提供對儲存桶中在特定時間存在的物件的存取。

您可以從現有儲存桶建立分支儲存桶。建立分支儲存桶後，建立該儲存桶的原始儲存桶稱為_基本儲存桶_。此外，您可以從另一個分支儲存桶建立一個分支儲存桶。

分支儲存桶提供對受保護資料的訪問​​，但不作為備份。若要繼續保護數據，請在基本儲存桶上使用這些功能：

* link:../tenant/using-s3-object-lock.html["S3物件鎖定"]
* link:../admin/grid-federation-what-is-cross-grid-replication.html["跨網格複寫"]用於基礎桶
* link:../tenant/manage-bucket-policy.html["儲存桶策略"]用於版本化儲存桶，以清理舊物件版本


請注意分支桶的以下特徵：

* 您可以使用以下方式存取分支儲存桶中的對象link:../tenant/use-s3-console.html["S3 控制台下載對象"]。
* 當客戶端存取分支儲存桶中的物件時，該分支儲存桶的link:../s3/use-access-policies.html["訪問策略"]，而不是基本儲存桶的策略，決定是否允許或拒絕存取。
* 在基礎儲存桶中建立的物件是根據link:../ilm/access-create-ilm-rule-wizard.html["ILM規則"]適用於底部鏟鬥。根據 ILM 規則如何應用於分支儲存桶來評估在分支儲存桶中建立的物件。
* 分支儲存桶不支援跨網格複製。
* 分支儲存桶不支援平台服務。




== 分支儲存桶使用範例

* 您可以使用分支儲存桶來刪除損壞的對象，方法是從損壞發生之前的時間點建立一個分支儲存桶，然後將應用程式指向該分支儲存桶而不是包含損壞對象的基本儲存桶。
* 您正在將資料保存在版本控制的儲存桶中。存在一個意外的漏洞，導致許多不需要的物件在時間_T_之後被攝取。您可以為先前時間值 _T_ 建立一個分支儲存桶，並將用戶端操作重新導向至該分支儲存桶。然後，只有早於時間 _T_ 攝取的物件才會暴露給客戶端。




== 對分支儲存桶中的物件進行操作

* 對分支儲存桶執行 PUT 物件操作會在分支中建立一個物件。
* 對分支儲存桶執行 GET 物件操作將從分支中檢索物件。如果分支儲存桶中不存在該對象，則從基本儲存桶中擷取該物件。
* 分支儲存桶中的物件刪除如下：
+
[cols="1a,1a,2a,2a,2a"]
|===
| 營運 | 目標 | 結果 | 基本儲存桶中的物件可見性 | 分支儲存桶中的物件可見性 


 a| 
刪除沒有版本 ID 的
 a| 
基礎桶
 a| 
僅為基本儲存桶建立刪除標記
 a| 
HEAD/GET 傳回物件不存在，但特定版本仍可存取
 a| 
HEAD/GET 傳回物件存在，且特定版本仍可存取

刪除標記將在分支儲存桶之後創建 `beforeTime`。



 a| 
根據版本 ID 刪除
 a| 
基礎桶
 a| 
刪除了基本儲存桶和分支儲存桶的特定物件版本
 a| 
HEAD/GET 回傳物件版本不存在
 a| 
HEAD/GET 回傳物件版本不存在



 a| 
刪除沒有版本 ID 的
 a| 
分支桶
 a| 
僅為分支儲存桶建立刪除標記
 a| 
HEAD/GET 傳回物件（基本儲存桶物件不受影響）
 a| 
HEAD/GET 回傳物件不存在



 a| 
根據版本 ID 刪除
 a| 
分支桶
 a| 
僅刪除分支儲存桶的特定物件版本
 a| 
HEAD/GET 傳回特定物件版本（基本儲存桶物件不受影響）
 a| 
HEAD/GET 回傳物件版本不存在

|===


另請參閱link:../ilm/how-objects-are-deleted.html#delete-s3-versioned-objects["如何刪除S3版本控制物件"]。
