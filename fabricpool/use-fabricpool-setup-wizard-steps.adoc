---
permalink: fabricpool/use-fabricpool-setup-wizard-steps.html 
sidebar: sidebar 
keywords: fabricPool, StorageGRID, FabricPool setup wizard, ontap system manager 
summary: 您可以使用 FabricPool 設定精靈、將 StorageGRID 設定為 FabricPool 雲端層的物件儲存系統。 
---
= 存取並完成 StorageGRID FabricPool 設定精靈
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
您可以使用 FabricPool 設定精靈、將 StorageGRID 設定為 FabricPool 雲端層的物件儲存系統。

.開始之前
* 您已檢閱link:../fabricpool/use-fabricpool-setup-wizard.html["考量與要求"]以使用 FabricPool 安裝精靈。
+

NOTE: 如果您想將 StorageGRID 設定為與任何其他 S3 用戶端應用程式搭配使用link:../admin/use-s3-setup-wizard.html["使用 S3 設定精靈"]、請前往。

* 您有link:../admin/admin-group-permissions.html["root 存取權限"]。




== 存取精靈

您可以在開始使用 StorageGRID Grid Manager 時完成 FabricPool 設定精靈、也可以在任何時候存取並完成精靈。

.步驟
. 使用登入 Grid Manager link:../admin/web-browser-requirements.html["支援的網頁瀏覽器"]。
. 如果儀表板上出現 * FabricPool 和 S3 設定精靈 * 橫幅、請選取橫幅中的連結。如果橫幅不再出現、請從 Grid Manager 的標題列中選取說明圖示、然後選取 * FabricPool 和 S3 設定精靈 * 。
+
image::../media/help_menu.png[說明功能表]

. 在 FabricPool and S3 設定精靈頁面的 FabricPool 區段中、選取 * 立即設定 * 。
+
* 步驟 1 （共 9 步）：出現 Configure HA group* （配置 HA 組 * ）。





== 步驟 9 之 1 ：設定 HA 群組

高可用度（ HA ）群組是每個節點包含 StorageGRID 負載平衡器服務的集合。HA 群組可以包含閘道節點、管理節點或兩者。

您可以使用 HA 群組來協助保持 FabricPool 資料連線可用。HA 群組使用虛擬 IP 位址（ VIP ）來提供高可用度的負載平衡器服務存取權。如果 HA 群組中的作用中介面故障、備份介面就能管理工作負載、對 FabricPool 作業的影響微乎其微

有關此任務的詳細信息，請參閱link:../admin/managing-high-availability-groups.html["管理高可用度群組"]和link:best-practices-for-high-availability-groups.html["高可用度群組的最佳實務做法"]。

.步驟
. 如果您打算使用外部負載平衡器、則不需要建立 HA 群組。選擇 * 跳過此步驟 * 並轉至<<步驟 2 、共 9 步：設定負載平衡器端點>>。
. 若要使用 StorageGRID 負載平衡器、請建立新的 HA 群組或使用現有的 HA 群組。
+
[role="tabbed-block"]
====
.建立HA群組
--
.. 若要建立新的 HA 群組、請選取 * 建立 HA 群組 * 。
.. 如需 * 輸入詳細資料 * 步驟、請填寫下列欄位。
+
[cols="1a,3a"]
|===
| 欄位 | 說明 


 a| 
HA 群組名稱
 a| 
此 HA 群組的唯一顯示名稱。



 a| 
說明（選用）
 a| 
此 HA 群組的描述。

|===
.. 在 * 新增介面 * 步驟中、選取您要在此 HA 群組中使用的節點介面。
+
使用欄標題來排序列、或輸入搜尋詞彙以更快找到介面。

+
您可以選取一或多個節點、但每個節點只能選取一個介面。

.. 對於「介面優先順序」步驟、請判斷此 HA 群組的主要介面和任何備份介面。
+
拖曳列以變更 * 優先順序 * 欄中的值。

+
清單中的第一個介面是主要介面。主介面是作用中介面、除非發生故障。

+
如果 HA 群組包含多個介面、且作用中介面故障、則虛擬 IP （ VIP ）位址會依照優先順序移至第一個備份介面。如果該介面故障、VIP位址會移至下一個備份介面、依此類推。解決故障時、VIP位址會移回可用的最高優先順序介面。

.. 在 * 輸入 IP 位址 * 步驟中、請填寫下列欄位。
+
[cols="1a,3a"]
|===
| 欄位 | 說明 


 a| 
子網路 CIDR
 a| 
以 CIDR 表示法表示的 VIP 子網路位址和 #8212 ； IPv4 位址後面接著斜線和子網路長度（ 0-32 ）。

網路位址不得設定任何主機位元。例如 `192.16.0.0/22`：。



 a| 
閘道 IP 位址（選用）
 a| 
選用。如果用於存取 StorageGRID 的 ONTAP IP 位址與 StorageGRID VIP 位址不在同一子網路上、請輸入 StorageGRID VIP 本機閘道 IP 位址。本機閘道IP位址必須位於VIP子網路內。



 a| 
虛擬 IP 位址
 a| 
為 HA 群組中的作用中介面輸入至少一個且不超過十個 VIP 位址。所有 VIP 位址都必須位於 VIP 子網路內、而且所有位址都會同時在作用中介面上作用。

至少一個位址必須是 IPv4 。您也可以指定其他的IPv6位址。

|===
.. 選取 * 建立 HA 群組 * 、然後選取 * 完成 * 以返回 FabricPool 設定精靈。
.. 選取 * 繼續 * 以移至負載平衡器步驟。


--
.使用現有 HA 群組
--
.. 若要使用現有的 HA 群組、請從 * 選取 HA 群組 * 下拉式清單中選取 HA 群組名稱。
.. 選取 * 繼續 * 以移至負載平衡器步驟。


--
====




== 步驟 2 、共 9 步：設定負載平衡器端點

StorageGRID 使用負載平衡器來管理用戶端應用程式（例如 FabricPool ）的工作負載。負載平衡可將多個儲存節點的速度和連線容量最大化。

您可以使用 StorageGRID 負載平衡器服務（存在於所有閘道和管理節點上）、也可以連線至外部（第三方）負載平衡器。建議使用 StorageGRID 負載平衡器。

如需此工作的詳細資訊，請參閱一般link:../admin/managing-load-balancing.html["負載平衡考量"]和link:best-practices-for-load-balancing.html["FabricPool 負載平衡的最佳實務做法"]。

.步驟
. 選取或建立 StorageGRID 負載平衡器端點、或使用外部負載平衡器。
+
[role="tabbed-block"]
====
.建立端點
--
.. 選取*建立端點*。
.. 如需 * 輸入端點詳細資料 * 步驟、請填寫下列欄位。
+
[cols="1a,3a"]
|===
| 欄位 | 說明 


 a| 
名稱
 a| 
端點的描述性名稱。



 a| 
連接埠
 a| 
您要用於負載平衡的選用功能。StorageGRID此欄位預設為您建立的第一個端點為 10433 、但您可以輸入任何未使用的外部連接埠。如果您輸入 80 或 443 、則端點只能在 Gateway 節點上設定、因為這些連接埠是保留在管理節點上。

* 注意： * 不允許其他網格服務使用的連接埠。請參閱link:../network/internal-grid-node-communications.html["網路連接埠參考"]。



 a| 
用戶端類型
 a| 
必須是 *S3 * 。



 a| 
網路傳輸協定
 a| 
選擇* HTTPS *。

* 注意 * ：支援與 StorageGRID 通訊、但不建議使用 TLS 加密。

|===
.. 對於 *Select 綁定模式 * 步驟，請指定綁定模式。繫結模式可控制使用任何 IP 位址或使用特定 IP 位址和網路介面存取端點的方式。
+
[cols="1a,3a"]
|===
| 模式 | 說明 


 a| 
全域（預設）
 a| 
用戶端可以使用任何閘道節點或管理節點的 IP 位址、任何網路上任何 HA 群組的虛擬 IP （ VIP ）位址、或對應的 FQDN 來存取端點。

除非您需要限制此端點的存取能力、否則請使用* Global *設定（預設）。



 a| 
HA群組的虛擬IP
 a| 
用戶端必須使用 HA 群組的虛擬 IP 位址（或對應的 FQDN ）才能存取此端點。

具有此繫結模式的端點都可以使用相同的連接埠編號、只要您為端點選取的 HA 群組不會重疊。



 a| 
節點介面
 a| 
用戶端必須使用所選節點介面的 IP 位址（或對應的 FQDN ）來存取此端點。



 a| 
節點類型
 a| 
根據您選取的節點類型、用戶端必須使用任何管理節點的 IP 位址（或對應的 FQDN ）或任何閘道節點的 IP 位址（或對應的 FQDN ）來存取此端點。

|===
.. 對於 * 租戶存取 * 步驟、請選取下列其中一項：
+
[cols="1a,3a"]
|===
| 欄位 | 說明 


 a| 
允許所有租戶（預設）
 a| 
所有租戶帳戶都可以使用此端點來存取他們的貯體。

* 「允許所有租戶」 * 幾乎永遠是 FabricPool 所使用的負載平衡器端點的適當選項。

如果您使用 FabricPool 安裝精靈來安裝新的 StorageGRID 系統、但尚未建立任何租戶帳戶、則必須選取此選項。



 a| 
允許選取的租戶
 a| 
只有選取的租戶帳戶才能使用此端點存取其貯體。



 a| 
封鎖選取的租戶
 a| 
選取的租戶帳戶無法使用此端點存取其儲存區。所有其他租戶都可以使用此端點。

|===
.. 對於 * 附加憑證 * 步驟、請選取下列其中一項：
+
[cols="1a,3a"]
|===
| 欄位 | 說明 


 a| 
上傳憑證（建議）
 a| 
使用此選項可上傳 CA 簽署的伺服器憑證、憑證私密金鑰及選用的 CA 套件組合。



 a| 
產生憑證
 a| 
使用此選項可產生自我簽署的憑證。如需詳細的輸入內容、請參閱link:../admin/configuring-load-balancer-endpoints.html["設定負載平衡器端點"]。



 a| 
使用 StorageGRID S3 憑證
 a| 
只有在您已上傳或產生 StorageGRID 通用憑證的自訂版本時、才能使用此選項。如需詳細資訊、請參閱 link:../admin/configuring-custom-server-certificate-for-storage-node.html["設定 S3 API 憑證"] 。

|===
.. 選擇 * 完成 * 返回 FabricPool 設定精靈。
.. 選擇 * 繼續 * 以前往租戶和貯體步驟。



NOTE: 對端點憑證所做的變更、可能需要15分鐘才能套用至所有節點。

--
.使用現有負載平衡器端點
--
.. 從 * 選取負載平衡器端點 * 下拉式清單中選取現有端點的名稱。
.. 選擇 * 繼續 * 以前往租戶和貯體步驟。


--
.使用外部負載平衡器
--
.. 請填寫下列外部負載平衡器欄位。
+
[cols="1a,3a"]
|===
| 欄位 | 說明 


 a| 
FQDN
 a| 
外部負載平衡器的完整網域名稱（ FQDN ）。



 a| 
連接埠
 a| 
FabricPool 用來連線至外部負載平衡器的連接埠號碼。



 a| 
憑證
 a| 
複製外部負載平衡器的伺服器憑證、然後貼到此欄位。

|===
.. 選擇 * 繼續 * 以前往租戶和貯體步驟。


--
====




== 步驟 3 、共 9 步：租戶和貯體

租戶是可以使用 S3 應用程式在 StorageGRID 中儲存及擷取物件的實體。每個租戶都有自己的使用者、存取金鑰、貯體、物件和一組特定功能。您必須先建立 StorageGRID 租戶、才能建立 FabricPool 將使用的貯體。

貯體是用來儲存租戶物件和物件中繼資料的容器。雖然有些租戶可能有許多貯體、但精靈可讓您一次只建立或選取一個租戶和一個貯體。您可以稍後使用租戶管理器來新增任何您需要的額外貯體。

您可以建立新的租戶和貯體以供 FabricPool 使用、也可以選取現有的租戶和貯體。如果您建立新的租戶、系統會自動為租戶的根使用者建立存取金鑰 ID 和秘密存取金鑰。

有關此任務的詳細信息，請參閱link:creating-tenant-account-for-fabricpool.html["建立一個客戶帳戶FabricPool 以供使用"]和link:creating-s3-bucket-and-access-key.html["建立S3儲存區並取得存取金鑰"]。

.步驟
建立新的租戶和貯體、或選擇現有的租戶。

[role="tabbed-block"]
====
.新租戶和貯體
--
. 若要建立新的租戶和貯體、請輸入 * 租戶名稱 * 。例如 `FabricPool tenant`：。
. 根據您的StorageGRID系統是否使用，定義租用​​戶帳戶的根存取權限link:../admin/using-identity-federation.html["身分識別聯盟"]，link:../admin/how-sso-works.html["單一登入（ SSO ）"] ，或兩者兼而有之。
+
[cols="1a,3a"]
|===
| 選項 | 請這麼做 


 a| 
如果未啟用身分識別聯盟
 a| 
指定當以本機根使用者身分登入租戶時所使用的密碼。



 a| 
如果已啟用身分識別聯盟
 a| 
.. 選取現有的同盟群組以擁有租用戶的根存取權限。
.. 您也可以選擇指定當以本機根使用者身分登入租用戶時要使用的密碼。




 a| 
如果同時啟用身分識別聯盟和單一登入（ SSO ）
 a| 
選取現有的同盟群組以擁有租用戶的根存取權限。沒有本機使用者可以登入。

|===
. 對於 * 儲存庫名稱 * 、請輸入儲存 ONTAP 資料時 FabricPool 將使用的儲存庫名稱。例如 `fabricpool-bucket`：。
+

TIP: 您無法在建立貯體之後變更貯體名稱。

. 為此貯體選取 * 區域 * 。
+
使用預設區域(`us-east-1`）、除非您預期未來會使用 ILM 來根據貯體的區域篩選物件。

. 選取 * 建立並繼續 * 以建立租戶和貯體、並前往下載資料步驟


--
.選擇租戶和貯體
--
現有的租戶帳戶必須至少有一個未啟用版本設定的貯體。如果該租戶不存在任何貯體、則無法選取現有租戶帳戶。

. 從 * 浮動授權名稱 * 下拉式清單中選取現有的浮動授權。
. 從 * 貯體名稱 * 下拉式清單中選取現有貯體。
+
FabricPool 不支援物件版本設定、因此不會顯示啟用版本設定的儲存區。

+

NOTE: 請勿選擇已啟用 S3 物件鎖定的貯體來搭配 FabricPool 使用。

. 選取 * 繼續 * 以前往下載資料步驟。


--
====


== 步驟 4 / 9 ：下載 ONTAP 設定

在此步驟中、您可以下載檔案、以便在 ONTAP 系統管理員中輸入值。

.步驟
. （可選）選擇複製圖標（image:../media/icon_tenant_copy_url.png["複製圖示"]）將訪問密鑰 ID 和加密訪問密鑰複製到剪貼板。
+
這些值會包含在下載檔案中、但您可能想要個別儲存。

. 選取 * 下載 ONTAP 設定 * 下載包含您目前所輸入值的文字檔。
+
此 `ONTAP_FabricPool_settings___bucketname__.txt`檔案包含將 StorageGRID 設定為 FabricPool 雲端層的物件儲存系統所需的資訊、包括：

+
** 負載平衡器連線詳細資料、包括伺服器名稱（ FQDN ）、連接埠和憑證
** 儲存區名稱
** 存取租戶帳戶根使用者的金鑰 ID 和秘密存取金鑰


. 將複製的金鑰和下載的檔案儲存到安全的位置。
+

CAUTION: 在複製兩個存取金鑰、下載 ONTAP 設定或兩者之前、請勿關閉此頁面。關閉此頁面後、金鑰將無法使用。請務必將此資訊儲存在安全的位置、因為此資訊可用於從 StorageGRID 系統取得資料。

. 選取核取方塊以確認您已下載或複製存取金鑰 ID 和秘密存取金鑰。
. 選取 * 繼續 * 以移至 ILM 儲存資源池步驟。




== 步驟 5 （共 9 步）：選擇一個儲存池

儲存池是一組儲存節點。當您選取儲存池時、您會決定 StorageGRID 將使用哪些節點來儲存從 ONTAP 分層的資料。

如需此步驟的詳細資訊，請參閱link:../ilm/creating-storage-pool.html["建立儲存資源池"]。

.步驟
. 從 * 站台 * 下拉式清單中、選取您要用於從 ONTAP 分層資料的 StorageGRID 站台。
. 從 * 儲存池 * 下拉式清單中、選取該站台的儲存池。
+
站台的儲存池包含該站台的所有儲存節點。

. 選取 * 繼續 * 以移至 ILM 規則步驟。




== 第 6 步、共 9 步：檢閱 FabricPool 的 ILM 規則

資訊生命週期管理（ ILM ）規則可控制 StorageGRID 系統中所有物件的放置、持續時間和擷取行為。

FabricPool 安裝精靈會自動建立建議的 ILM 規則以供 FabricPool 使用。此規則僅適用於您指定的貯體。它在單一站台使用 2+1 銷毀編碼來儲存從 ONTAP 分層的資料。

有關此步驟的詳細信息，請參閱link:../ilm/access-create-ilm-rule-wizard.html["建立ILM規則"]和link:best-practices-ilm.html["搭配 FabricPool 資料使用 ILM 的最佳實務做法"]。

.步驟
. 檢閱規則詳細資料。
+
[cols="1a,3a"]
|===
| 欄位 | 說明 


 a| 
規則名稱
 a| 
自動產生且無法變更



 a| 
說明
 a| 
自動產生且無法變更



 a| 
篩選器
 a| 
貯體名稱

此規則僅適用於儲存在您指定的貯體中的物件。



 a| 
參考時間
 a| 
擷取時間

放置指示會在物件最初儲存至貯體時開始。



 a| 
放置指示
 a| 
使用 2+1 銷毀編碼

|===
. 依 * 時段 * 和 * 儲存池 * 排序保留圖、以確認放置指示。
+
** 規則的 * 時段 * 是 * 天 0 - 永遠 * 。* 第 0 天 * 表示當資料從 ONTAP 分層時會套用規則。* Forever * 表示 StorageGRID ILM 不會刪除已從 ONTAP 分層的資料。
** 規則的 * 儲存池 * 是您選取的儲存池。* EC 2+1 * 表示資料將使用 2+1 銷毀編碼來儲存。每個物件都會儲存為兩個資料片段和一個同位元檢查片段。每個物件的三個片段將儲存至單一站台的不同儲存節點。


. 選取 * 建立並繼續 * 以建立此規則、並前往 ILM 原則步驟。




== 第 7 步、共有 9 步：審查並啟動 ILM 原則

在 FabricPool 安裝精靈建立 ILM 規則以供 FabricPool 使用之後，它會建立 ILM 原則。您必須先仔細模擬並檢閱此原則、然後再加以啟動。

有關此步驟的詳細信息，請參閱link:../ilm/creating-ilm-policy.html["建立ILM原則"]和link:best-practices-ilm.html["搭配 FabricPool 資料使用 ILM 的最佳實務做法"]。


CAUTION: 當您啟動新的 ILM 原則時、 StorageGRID 會使用該原則來管理網格中所有物件（包括現有物件和新擷取的物件）的放置、持續時間和資料保護。在某些情況下、啟動新原則可能會導致現有物件移至新位置。


CAUTION: 為了避免資料遺失、請勿使用會過期或刪除 FabricPool 雲端層資料的 ILM 規則。將保留期間設為 * 永遠 * 、以確保 FabricPool 物件不會被 StorageGRID ILM 刪除。

.步驟
. （可選）更新系統生成的 * 策略名稱 * 。根據預設、系統會將「 + FabricPool 」附加至作用中或非作用中原則的名稱、但您可以提供自己的名稱。
. 檢閱非作用中原則中的規則清單。
+
** 如果您的網格沒有非作用中的 ILM 原則、精靈會複製作用中原則並將新規則新增至頂端、藉此建立非作用中原則。
** 如果您的網格已有非作用中的 ILM 原則、且該原則使用與作用中 ILM 原則相同的規則和順序、則精靈會將新規則新增至非作用中原則的頂端。
** 如果非作用中原則包含不同的規則或不同於作用中原則的順序、則精靈會複製作用中原則並將新規則新增至最上方、藉此建立新的非作用中原則。


. 檢閱新非作用中原則中的規則順序。
+
因為 FabricPool 規則是第一個規則、所以在評估原則中的其他規則之前、會先放置 FabricPool 儲存庫中的任何物件。任何其他儲存區中的物件都會依後續規則置於原則中。

. 檢閱保留圖表、瞭解如何保留不同的物件。
+
.. 選取 * 全部展開 * 以查看非作用中原則中每個規則的保留圖表。
.. 選取 * 時段 * 和 * 儲存池 * 以檢閱保留圖表。確認適用於 FabricPool 貯體或租戶的任何規則都會保留物件 * 永遠 * 。


. 檢閱非作用中原則後、請選取 * 啟動並繼續 * 來啟動原則、然後前往流量分類步驟。



CAUTION: ILM 原則中的錯誤可能導致無法修復的資料遺失。在啟動之前、請先仔細檢閱原則。



== 步驟 8 （共 9 步）：建立流量分類原則

FabricPool 設定精靈可選擇建立流量分類原則、以用於監控 FabricPool 工作負載。系統建立的原則會使用相符的規則來識別與您建立的貯體相關的所有網路流量。此原則僅監控流量、不會限制 FabricPool 或任何其他用戶端的流量。

如需此步驟的詳細資訊，請參閱link:creating-traffic-classification-policy-for-fabricpool.html["建立FabricPool 一套適用於此功能的流量分類原則"]。

.步驟
. 檢閱原則。
. 如果要建立此流量分類原則、請選取 * 建立並繼續 * 。
+
一旦 FabricPool 開始將資料分層至 StorageGRID 、您就可以前往「流量分類原則」頁面、檢視此原則的網路流量計量。之後、您也可以新增規則來限制其他工作負載、並確保 FabricPool 工作負載擁有大部分的頻寬。

. 否則、請選取 * 略過此步驟 * 。




== 步驟 9 之 9 ：檢視摘要

此摘要提供您設定項目的詳細資料、包括負載平衡器、租戶和貯體的名稱、流量分類原則、以及作用中的 ILM 原則、

.步驟
. 檢閱摘要。
. 選擇*完成*。




== 後續步驟

完成 FabricPool 精靈後、請執行這些額外步驟。

.步驟
. 移至link:configure-ontap.html["設定 ONTAP 系統管理員"]以輸入儲存的值、並完成連線的 ONTAP 端。您必須將 StorageGRID 新增為雲端層、將雲端層附加至本機層以建立 FabricPool 、並設定磁碟區分層原則。
. 前往link:configure-dns-server.html["設定 DNS 伺服器"]並確定 DNS 包含一筆記錄、可將 StorageGRID 伺服器名稱（完整網域名稱）與您將使用的每個 StorageGRID IP 位址建立關聯。
. 請移至link:other-best-practices-for-storagegrid-and-fabricpool.html["其他關於功能與功能的最佳實務做法StorageGRID FabricPool"]以瞭解 StorageGRID 稽核記錄和其他全域組態選項的最佳實務做法。

